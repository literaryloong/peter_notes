存储方案

>  50G/日 视频、图片、文档资源
>
> 一年以后的数据归档
>
> 数据存储5年
>
> 每年~1TB的访问流量

## 1. 全部存储在七牛云

600GB存储预付费一年543,后付费一年712  ;  CDN1TB预付费189 ,后付费286

|        | 存储                 | 存储费用  | 流量费用+CDN | 总计/年 |
| ------ | -------------------- | --------- | ------------ | ------- |
| 第一年 | 1700G                | 2000      | 500          | 2500    |
| 第二年 | 1700G+1700G低频/归档 | 2000+500  | 500          | 3000    |
| 第三年 | 1700G+3400G低频/归档 | 2000+1000 | 500          | 3500    |
| 第四年 | 1700G+5100G低频/归档 | 2000+1500 | 500          | 4000    |
| 第五年 | 1700G+6800G低频/归档 | 2000+2000 | 500          | 4500    |

+ 一年以上的归档文件，如果取回会收取 0.03元/GB （0.06元/GB）

  

> ### **低频存储类型**
>
> 七牛低频存储适合长期保存不频繁访问的数据（平均每月访问频率1到2次）。相比于标准存储，低频存储具有相同的数据可靠性、吞吐量和访问时延，可用性略低，但是单价更低、存储成本更优，非常适合不频繁访问（平均一年少于12次）但在需要时也能快速实时访问数据的业务场景，比如网盘存储，各类移动应用、智能设备、企业数据的长期备份，监控数据存储等。低频存储类型的Object有最短存储时间，存储时间短于30天的Object提前被删除会产生一定费用。低频存储Object有最小计量空间要求，Object大小不足64KB，会按照64KB计算存储空间。数据获取会产生数据取回费用。
> 关键特性：
>
> - 支持数据的实时访问
> - 支持对象自动迁移的生命周期管理
> - 支持数据的跨区域同步
> - 有最短存储时间（30天）和最小计量空间（64KB）的要求
>
> 
>
> ### **归档存储类型**
>
> 七牛云归档存储，适合需要长期保存、但在存储周期内很少需要被访问的数据存储场景，比如档案数据、医疗影像、科学资料、长期备份数据等。归档数据不支持实时访问，数据进入到可读取状态需要1～5分钟的解冻时间，但是存储安全、持久且成本很低。归档存储类型的Object有最短存储时间，存储时间短于60天的Object提前删除会产生一定费用。归档类型存储Object有最小计量空间要求，Object大小低于64KB，会按照64KB计算存储空间。数据获取会产生数据取回费用。
> 关键特性：
>
> - 数据解冻为可读取状态需要1～5分钟的等待时间
> - 支持对象自动迁移的生命周期管理
> - 有最短存储时间（60天）和最小计量空间（64KB）的要求
> - 暂时不支持数据的跨区域同步





## 2. 自建文件服务器存储

搭建[*Ceph*(分布式文件系统)](http://www.baidu.com/link?url=T7xnvStVQ7v5WjNcQV-0UiWR5QSf5NfLsQnc-EqwFzaEENBAGc2Cs9ifPjddtSTGoj1f9IfKdDZIhvBLiBsHNK)

为满足数据存储容量和保证数据可用性，需要使用了3台高密的服务器来构建了一个最小可行集群。

每台配置3T存储。磁盘可做RAID0. 以下是评估的一次性建设费用（不包括机房维护、电费、运维人力等费用）

| 服务器    | 专线带宽100M/年 | 磁盘       | 总计     |
| --------- | --------------- | ---------- | -------- |
| 17500*3台 | 2000            | 10000 (9T) | 64,500元 |

* R740 8盘位 银牌5218R /64G(32G*2)/无硬盘 托架*8/H330 RAID卡/750W单电/无导轨 17500未税



## 综上

考虑了自建文件存储服务集群 和 使用七牛云存储两种文件归档方案，其中：

+ 自建：文件读取不受访问次数、流量限制；并方便连上服务器其他方式长久备份、拷贝到其他存储介质。缺点：成本高、运维难
+ 七牛：成本更低，无需运维，安全可靠性具有保障。 缺点：历史归档读取费用高，如果频繁查询或想另外备份，会收取较多费用。